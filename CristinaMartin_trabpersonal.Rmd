---
title: "trabajopersonal"
author: "Cristina Martin"
date: "26/1/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
install.packages("nycflights13")
library(nycflights13)
library(tidyverse)
vuelos <- nycflights13::flights
```

#### 1. Encuentra todos los vuelos que llegaron más de una hora tarde de lo previsto.

```{r}
filter(vuelos, arr_delay >= 60)
```


#### 2. Encuentra todos los vuelos que volaron hacia San Francisco (aeropuertos SFO y OAK).

```{r}
filter(vuelos, dest == "SFO" | dest == "OAK")
```


#### 3.  Encuentra todos los vuelos operados por United American (UA) o por American Airlines (AA).

```{r}
filter(vuelos, carrier == "UA" | carrier == "AA")
```


#### 4. Encuentra todos los vuelos que salieron en los meses de primavera (Abril, Mayo y Junio)

```{r}
filter(vuelos, month == 4 | month == 5 | month == 6)
```


#### 5. Encuentra todos los vuelos que llegaron más de una hora tarde pero salieron con menos de una hora de retraso.

```{r}
filter(vuelos, arr_delay >= 60 & dep_delay <= 60)
```


#### 6. Encuentra todos los vuelos que salieron con más de una hora de retraso pero consiguieron llegar con menos de 30 minutos de retraso (el avión aceleró en el aire)

```{r}
filter(vuelos, dep_delay >= 60 & arr_delay <= 30)
```


#### 7. Encuentra todos los vuelos que salen entre medianoche y las 7 de la mañana (vuelos nocturnos).

```{r}
filter(vuelos, dep_time == 0:700)
```


#### 8. ¿Cuántos vuelos tienen un valor desconocido de dep_time?

```{r}
a <- which(is.na(vuelos$dep_time))
length(a)
```


#### 9. ¿Qué variables del dataset contienen valores desconocidos?

```{r}
arrange(vuelos,desc(is.na(tailnum)))

```
Las variables que contienen valores desconocidos son: dep_time, dep_delay, arr_time, arr_delay, tailnum, air_time.

#### 10. Ordena los vuelos de flights para encontrar los vuelos más retrasados en la salida. ¿Qué vuelos fueron los que salieron los primeros antes de lo previsto?

```{r}
retrasados <- arrange(vuelos,desc(dep_delay))
adelantados <- arrange(vuelos,dep_delay)
```

Los vuelos que salieron los primeros antes de los previsto fueron aquellos que tienen los siguientes tailnum: N592JB (salió 43 mins antes) y N612DL (salió 33 mins antes).

#### 11. Ordena los vuelos de flights para encontrar los vuelos más rápidos. Usa el concepto de rapidez que consideres.

```{r}
vuelos$velocidad <- (vuelos$distance/vuelos$air_time)
arrange(vuelos,desc(velocidad))
```


#### 12.  ¿Qué vuelos tienen los trayectos más largos?

```{r}
arrange(vuelos,desc(distance))
```
El trayecto más largo es siempre el que parte del aeropuerto JFK y aterriza en el aeropuerto HNL con una distancia total de 4983 millas.

#### 13. ¿Qué vuelos tienen los trayectos más cortos?

```{r}
arrange(vuelos,distance)
```
El trayecto más corto es siempre aquel que sale del aeropuerto EWR y llega al aeropuerto PHL con una distancia de 80 millas. El primer vuelo no lo tengo en cuenta porque supongo que fue cancelado ya que no tiene tiempo de vuelo (aunque si hubiese salido sería el que tiene menor distancia).

#### 14.  El dataset de vuelos tiene dos variables, dep_time y sched_dep_time muy útiles pero difíciles de usar por cómo vienen dadas al no ser variables continuas. Fíjate que cuando pone 559, se refiere a que el vuelo salió a las 5:59... Convierte este dato en otro más útil que represente el número de minutos que pasan desde media noche.

```{r}

```


#### 15.Compara los valores de dep_time, sched_dep_time y dep_delay. ¿Cómo deberían relacionarse estos tres números? Compruébalo y haz las correcciones numéricas que necesitas.

```{r}

```


#### 16. Investiga si existe algún patrón del número de vuelos que se cancelan cada día.

```{r}

```


#### 17. Investiga si la proporción de vuelos cancelados está relacionada con el retraso promedio por día en los vuelos.

```{r}

```


#### 18. Investiga si la proporción de vuelos cancelados está relacionada con el retraso promedio por aeropuerto en los vuelos.

```{r}

```


#### 19. ¿Qué compañía aérea sufre los peores retrasos?

```{r}

```


#### 20.  Queremos saber qué hora del día nos conviene volar si queremos evitar los retrasos en la salida.

```{r}

```


#### 21. Queremos saber qué día de la semana nos conviene volar si queremos evitar los retrasos en la salida.

```{r}

```


#### 22. Para cada destino, calcula el total de minutos de retraso acumulado.

```{r}

```


#### 23. Para cada uno de ellos, calcula la proporción del total de retraso para dicho destino.

```{r}

```


#### 24. Es hora de aplicar todo lo que hemos aprendido para visualizar mejor los tiempos de salida para vuelos cancelados vs los no cancelados. Recuerda bien qué tipo de dato tenemos en cada caso. ¿Qué deduces acerca de los retrasos según la hora del día a la que está programada el vuelo de salida?

```{r}

```


#### 25.Subir la carpeta a github y facilitar la url.

```{r}

```


#### 26. Al finalizar el documento agrega el comando sessionInfo()

```{r}

```

